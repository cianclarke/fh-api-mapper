<script id="tplNodejsRequest" type="text/x-handlebars-template">
  <pre>
var request = require('request');
request({
url: "{{url}}",
method: "{{method}}",
{{#if headers}}
headers: {
{{#each headers}}
  "{{@key}}" : "{{@this}}"{{#unless @last}},{{/unless}}
{{/each}}
}{{#if data}},{{/if}}
{{/if}}
{{#if data}}
data: '{{ escapeSingleQuotes data }}'
{{/if}}
}, function (error, response, body) {
if (error) {
return console.error('An error occured:', error);
}
console.log('Server responded with:', body);
});
</pre>

<script id="tplCurlRequest" type="text/x-handlebars-template">
  <pre>
curl -X {{method}}{{#if headers}}{{#each headers}} -H "{{@key}}:{{@this}}" {{/each}} {{/if}} {{#if data}}--data "{{escapeSingleQuotes data}}"{{/if}} {{url}} 
  </pre>
</script>

<script id="tplResponseHeaders" type="text/x-handlebars-template">
  {{#each headers}}
    <strong>{{name}}</strong> : {{value}}<br />
  {{/each}}
</script>
<script id="tplCreateEditRequestView" type="text/x-handlebars-template">
  <a id="backButton" class="btn btn-back"><i class="icon icon-arrow-left pull-left"></i>Back</a>
  <h1>{{#if isNew}}Create{{else}}Edit{{/if}} Request</h1>
  <form class="try form-horizontal">
    <fieldset>
      <legend>Request</legend>
      {{#controlGroup "Method" "The HTTP Verb to make your request with."}}
        <select name="method" class="span2">
          <option>GET</option>
          <option>POST</option>
          <option>PUT</option>
          <option>PATCH</option>
          <option>DELETE</option>
          <option>HEAD</option>
          <option>OPTIONS</option>
        </select>
      {{/controlGroup}}
      
      {{#controlGroup "URL" "The full URL of the service you wish to integrate with."}}
        <input type="text" name="url" placeholder="Url" value="{{model.url}}" class="span6">
      {{/controlGroup}}
    </fieldset>  
    <fieldset>
      <legend>Headers</legend>
      
      {{#controlGroup "Content-type" "The type of content you will send in your request."}}
        <select name="content-type" class="span2">
          <option name="application/json">application/json</option>
          <option name="application/atom+xml">application/atom+xml</option>
          <option name="application/x-www-form-urlencoded">application/x-www-form-urlencoded</option>
          <option name="application/xml">application/xml</option>
          <option name="multipart/form-data">multipart/form-data</option>
          <option name="text/html">text/html</option>
          <option name="text/plain">text/plain</option>
        </select>
      {{/controlGroup}}
      
      {{#controlGroup "Additional Headers" ""}}
        {{#each model.headers}}
          <span class="headerRow">
            <input name="headerKey{{@key}}" placeholder="Header Key" value="{{key}}">:
            <input name="headerValue{{@key}}" placeholder="Header Value" value="{{value}}">
            <div class="btn-group">
              <a class="btn btn-remove-header"><i class="icon-remove"></i></a>
              {{#if @last}}<a class="btn btn-new-header"><i class="icon-plus"></i></a>{{/if}}
            </div>
          </span>

          
          
          <br />
        {{/each}}
      {{/controlGroup}}
    </fieldset>
    
    {{#if hasBody}}
    <fieldset>
      <legend>Request Body</legend>
      
      {{#controlGroup "Request body"}}
        <textarea class="span12" name="data"></textarea>
      {{/controlGroup}}
    </fieldset>
    {{/if}}
      
    <fieldset>
      {{#controlGroup}}
        <button class="btn btn-primary" type="submit">Send Request</button>
      {{/controlGroup}}
    </fieldset>
    <fieldset>
      <legend><a class="toggleable collapsed" data-toggle="collapse" href="#rawRequestCollapsible">Raw request </a></legend>
      <div id="rawRequestCollapsible" class="collapse">
        
        {{#controlGroup "Request Headers"}}
          <textarea class="span12" name="request-headers" disabled></textarea>
        {{/controlGroup}}
        
        {{#controlGroup "Raw Request"}}
          <textarea class="span12" name="request-raw" disabled></textarea>
        {{/controlGroup}}
      </div>
    </fieldset>

    <fieldset>
      <legend>Response</legend>
      {{#controlGroup "Status"}}
        <div class="status"></div>
      {{/controlGroup}}
      
      {{#controlGroup "Response Headers"}}
        <div class="responseHeaders"></div>
      {{/controlGroup}}
      
      {{#controlGroup "Response Body"}}
        <textarea name="response-raw" rows="24" cols="100" disabled class="span12"></textarea>
      {{/controlGroup}}
    </fieldset>
    
    <fieldset>
      <legend><a class="toggleable collapsed" data-toggle="collapse" href="#sampleCodeCollapsible">Sample Code </a></legend>
      <div id="sampleCodeCollapsible" class="collapse">
        {{#controlGroup "Node.js Request"}}
          <div id="sample-nodejs"></div>
        {{/controlGroup}}
        {{#controlGroup "cURL Request"}}
          <div id="sample-curl"></div>
        {{/controlGroup}}
      </div>
    
    </fieldset>
    
    {{#unless isNew}}
      {{#controlGroup}}
        <a class="btn btn-danger btn-delete">Delete This Request</a>
      {{/controlGroup}}
    {{/unless}}
    
    {{#controlGroup}}
      <a class="btn btn-back">Cancel</a>
      <a id="saveRequest" class="btn btn-primary">{{#if isNew}}Create{{else}}Update{{/if}} Request</a>
    {{/controlGroup}}
  </form>
</script>
